# Updated for new schema: skillCalls -> skillUsed, data -> selector, squeakCost -> newEnergy
query SkillUsedList($first: Int = 100, $skip: Int = 0) {
  skillUsed(
    first: $first
    skip: $skip
    orderBy: blockTimestamp
    orderDirection: desc
  ) {
    id
    aminal {
      id
      contractAddress
    }
    caller {
      id
      address
    }
    skillAddress
    selector
    newEnergy
    blockTimestamp
  }
}

query SkillUsedByAminal($contractAddress: String!) {
  skillUsed(
    where: { aminal: $contractAddress }
    orderBy: blockTimestamp
    orderDirection: desc
  ) {
    id
    caller {
      id
      address
    }
    skillAddress
    selector
    newEnergy
    blockTimestamp
  }
}

query SkillUsedBySkill($skillAddress: Bytes!) {
  skillUsed(
    where: { skillAddress: $skillAddress }
    orderBy: blockTimestamp
    orderDirection: desc
  ) {
    id
    aminal {
      id
      contractAddress
    }
    caller {
      id
      address
    }
    selector
    newEnergy
    blockTimestamp
  }
}

query GlobalSkillsList($first: Int = 100, $skip: Int = 0) {
  globalSkills(
    first: $first
    skip: $skip
    orderBy: callCount
    orderDirection: desc
  ) {
    id
    skillAddress
    name
    callCount
    totalSqueakCost
    blockTimestamp
  }
}
