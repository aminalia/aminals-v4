specVersion: 1.2.0
schema:
  file: ./schema.graphql
templates:
  - kind: ethereum/contract
    name: Aminal
    network: sepolia
    source:
      abi: Aminal
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - Aminal
        - FeedAminalEvent
        - Squeak
        - SkillCall
        - BreedingConsent
        - User
        - Relationship
      abis:
        - name: Aminal
          file: ../out/Aminal.sol/Aminal.json
        - name: AminalFactory
          file: ../out/AminalFactory.sol/AminalFactory.json
      eventHandlers:
        - event: FeedAminal(address,uint256,uint256,uint256,uint256,uint256)
          handler: handleFeedAminal
        - event: Squeak(address,uint256,uint256,uint256,uint256)
          handler: handleSqueak
        - event: SkillCall(address,bytes,uint256)
          handler: handleSkillCall
        - event: BreedableSet(address,bool)
          handler: handleBreedableSet
        - event: EnergyTransferred(indexed address,uint256,uint256)
          handler: handleEnergyTransferred
      file: ./src/aminal.ts
dataSources:
  - kind: ethereum
    name: AminalFactory
    network: sepolia
    source:
      address: "0x42fa457b1a742c5d7330f24916c60985448b8e8f"
      abi: AminalFactory
      startBlock: 8700538
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - AminalFactory
        - Aminal
        - BreedAminalEvent
        - User
      abis:
        - name: AminalFactory
          file: ../out/AminalFactory.sol/AminalFactory.json
        - name: Aminal
          file: ../out/Aminal.sol/Aminal.json
      eventHandlers:
        - event: AminalSpawned(indexed address,indexed uint256,indexed uint256,uint256,uint256,uint256,uint256,uint256,uint256,uint256,uint256,uint256)
          handler: handleAminalSpawned
        - event: BreedAminal(indexed address,indexed address,uint256)
          handler: handleBreedAminal
      file: ./src/factory.ts
  - kind: ethereum
    name: GeneAuction
    network: sepolia
    source:
      address: "0x9c0ad5e98b4a3dcdaef1a2162172c9ac4391ac1f"
      abi: GeneAuction
      startBlock: 8700538
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - GeneAuction
        - GeneProposal
        - GeneVote
        - User
        - Aminal
      abis:
        - name: GeneAuction
          file: ../out/GeneAuction.sol/GeneAuction.json
        - name: AminalFactory
          file: ../out/AminalFactory.sol/AminalFactory.json
        - name: GenesNFT
          file: ../out/GenesNFT.sol/GenesNFT.json
      eventHandlers:
        - event: VotingCreated(indexed uint256,indexed uint256,indexed uint256,uint256,uint256,uint256)
          handler: handleVotingCreated
        - event: VotingSettled(indexed uint256,indexed uint256,uint256[8],uint256)
          handler: handleVotingSettled
        - event: GeneProposed(indexed uint256,indexed uint8,indexed uint256,address)
          handler: handleGeneProposed
        - event: GeneVoteCast(indexed uint256,indexed uint8,indexed uint256,address,uint256)
          handler: handleGeneVoteCast
        - event: GeneRemovalVote(indexed uint256,indexed uint8,indexed uint256,address,uint256)
          handler: handleGeneRemovalVote
        - event: GeneRemoved(indexed uint256,indexed uint8,indexed uint256)
          handler: handleGeneRemoved
        - event: BulkVoteCast(indexed uint256,indexed address,uint256[8],uint256)
          handler: handleBulkVoteCast
      file: ./src/gene-auction.ts
  - kind: ethereum
    name: GenesNFT
    network: sepolia
    source:
      address: "0xbddca7fae18cba8fc457a8b69338d404d443cb0d"
      abi: GenesNFT
      startBlock: 8700538
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - GeneNFT
        - User
      abis:
        - name: GenesNFT
          file: ../out/GenesNFT.sol/GenesNFT.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,indexed uint256)
          handler: handleTransfer
      file: ./src/genes-nft.ts
# GeneNFTFactory not deployed yet - uncomment when available
#  - kind: ethereum
#    name: GeneNFTFactory
#    network: sepolia
#    source:
#      address: "0x41063967aa8337ab89a2f69ca8ff54ba13ce1f06"
#      abi: GeneNFTFactory
#      startBlock: 8700538
#    mapping:
#      kind: ethereum/events
#      apiVersion: 0.0.9
#      language: wasm/assemblyscript
#      entities:
#        - GeneNFT
#        - User
#      abis:
#        - name: GeneNFTFactory
#          file: ../out/GeneNFTFactory.sol/GeneNFTFactory.json
#        - name: GenesNFT
#          file: ../out/GenesNFT.sol/GenesNFT.json
#      eventHandlers:
#        - event: GeneCreated(indexed uint256,indexed address,indexed uint8,string)
#          handler: handleGeneCreated
#      file: ./src/gene-nft-factory.ts
